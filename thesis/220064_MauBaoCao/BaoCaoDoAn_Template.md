# BÁO CÁO ĐỒ ÁN TỐT NGHIỆP

**TÊN ĐỀ TÀI:** Xây dựng Hệ thống Quản lý và Bán hàng Trực tuyến cho Cửa hàng Trà Sữa (MilkTeaWebsite)

**Họ và tên sinh viên:** Phạm Minh Thư Trang  
**Mã số sinh viên:** [Điền MSSV]  
**Lớp:** [Điền lớp]  
**Khoa:** Công nghệ Thông tin  
**Giảng viên hướng dẫn:** [Điền tên giảng viên]

---

## NHẬN XÉT CỦA GIẢNG VIÊN HƯỚNG DẪN

_(Để trống - Giảng viên sẽ điền)_

**Nhận xét:**
- Về nội dung:
- Về hình thức:
- Về kết quả đạt được:
- Điểm hướng dẫn:

Trà Vinh, ngày …… tháng …… năm 2025

**Giáo viên hướng dẫn**

_(Ký tên và ghi rõ họ tên)_

---

## NHẬN XÉT CỦA THÀNH VIÊN HỘI ĐỒNG

_(Để trống - Thành viên hội đồng sẽ điền)_

**Nhận xét:**
- Nội dung trình bày:
- Khả năng trả lời câu hỏi:
- Điểm phản biện:

Trà Vinh, ngày …… tháng …… năm 2025

**Thành viên hội đồng**

_(Ký tên và ghi rõ họ tên)_

---

## LỜI CẢM ƠN

Khi hoàn thành đồ án "MilkTeaWebsite - Hệ thống Quản lý và Bán hàng cho Cửa hàng Trà Sữa", em xin gửi lời cảm ơn chân thành nhất tới:

Thầy/Cô [Tên giảng viên hướng dẫn], người đã tận tình hướng dẫn, chỉ bảo và định hướng em trong suốt quá trình thực hiện đồ án. Những góp ý chuyên môn về kiến trúc phần mềm, thiết kế cơ sở dữ liệu và các best practices trong phát triển web đã giúp em hoàn thiện sản phẩm một cách bài bản và chuyên nghiệp.

Các thầy cô trong khoa Công nghệ Thông tin - Trường Đại học Trà Vinh đã truyền đạt kiến thức nền tảng vững chắc về lập trình web, cơ sở dữ liệu, kiến trúc phần mềm và các công nghệ hiện đại. Những kiến thức này là hành trang quý báu giúp em tự tin triển khai đồ án.

Gia đình, bạn bè đã luôn động viên, ủng hộ và tạo điều kiện tốt nhất cho em trong suốt quá trình học tập và thực hiện đồ án. Đặc biệt, em cảm ơn các bạn đã tham gia test hệ thống và đóng góp những phản hồi quý giá giúp cải thiện trải nghiệm người dùng.

Quá trình thực hiện đồ án là một hành trình học tập sâu sắc, giúp em củng cố kiến thức về ASP.NET Core, Entity Framework Core, kiến trúc phân lớng và các patterns trong phát triển phần mềm. Em hy vọng sản phẩm này không chỉ là một đồ án tốt nghiệp mà còn là nền tảng để phát triển thêm các tính năng nâng cao và có thể ứng dụng thực tế.

Một lần nữa, em xin chân thành cảm ơn!

---

## MỤC LỤC

_(Sẽ được tạo tự động khi xuất sang Word/PDF)_

**MỞ ĐẦU** ........................................................ 1
1. Lý do chọn đề tài ........................................... 1
2. Mục tiêu nghiên cứu ....................................... 2
3. Đối tượng và phạm vi nghiên cứu ........................ 2
4. Phương pháp nghiên cứu .................................. 3
5. Ý nghĩa của đề tài .......................................... 3

**CHƯƠNG 1: NGHIÊN CỨU LÝ THUYẾT** ................. 4
1.1. Cơ sở lý thuyết ........................................... 4
1.2. Công nghệ sử dụng ...................................... 6
1.3. Các Patterns và Best Practices áp dụng ............. 8
1.4. Bảo mật cơ bản ............................................ 10
1.5. Mô hình định giá động .................................. 11
1.6. Tóm tắt chương .......................................... 12

**CHƯƠNG 2: HIỆN THỰC HÓA NGHIÊN CỨU** ......... 13
2.1. Mô tả bài toán ............................................. 13
2.2. Yêu cầu chức năng ....................................... 15
2.3. Mô hình cơ sở dữ liệu .................................. 18
2.4. Lược đồ Use case ........................................ 21
2.5. Kiến trúc hệ thống ...................................... 24

**CHƯƠNG 3: KẾT QUẢ NGHIÊN CỨU** .................. 30
3.1. Giao diện và chức năng đã triển khai ............... 30
3.2. Kiểm thử và đánh giá .................................. 38
3.3. Kết quả đạt được ........................................ 42

**CHƯƠNG 4: KẾT LUẬN VÀ HƯỚNG PHÁT TRIỂN** ... 45
4.1. Kết luận .................................................... 45
4.2. Hạn chế .................................................... 46
4.3. Hướng phát triển ........................................ 47

**DANH MỤC TÀI LIỆU THAM KHẢO** ................... 67

**PHỤ LỤC** ..................................................... 68

---

## DANH MỤC HÌNH ẢNH

_(Sẽ được cập nhật khi chèn hình vào báo cáo)_

Hình 1.1: Kiến trúc ASP.NET Core Razor Pages ........................ 5
Hình 1.2: Entity Framework Core workflow .............................. 7
Hình 1.3: Repository Pattern và Unit of Work .......................... 9

Hình 2.1: Use-case diagram - Tổng quan hệ thống ..................... 16
Hình 2.2: ER Diagram - Toàn bộ cơ sở dữ liệu ......................... 18
Hình 2.3: Database relationships diagram ............................... 20

Hình 3.1: Kiến trúc 3-layer (Presentation - BLL - DAL) ............... 41
Hình 3.2: Dependency Injection flow diagram .......................... 43

Hình 4.1: Trang chủ MilkTeaWebsite ..................................... 46
Hình 4.2: Trang danh sách sản phẩm (Products List) .................. 47
Hình 4.3: Trang chi tiết sản phẩm với Size/Topping selector ......... 48
Hình 4.4: Giỏ hàng với tính năng cập nhật số lượng .................. 49
Hình 4.5: Trang thanh toán (Checkout form) ........................... 50
Hình 4.6: Trang lịch sử đơn hàng (Order History) ..................... 51
Hình 4.7: Staff Dashboard với widgets thống kê ...................... 52
Hình 4.8: Staff Order Management ...................................... 53
Hình 4.9: Admin Product Management (CRUD) ........................ 54
Hình 4.10: Login và Register pages ..................................... 55

---

## DANH MỤC BẢNG BIỂU

Bảng 2.1: Danh sách yêu cầu chức năng ................................ 12
Bảng 2.2: Danh sách yêu cầu phi chức năng ........................... 14
Bảng 2.3: Chi tiết bảng User ............................................. 21
Bảng 2.4: Chi tiết bảng Product .......................................... 22
Bảng 2.5: Chi tiết bảng Order và OrderDetail ......................... 23

Bảng 3.1: Công nghệ và thư viện sử dụng .............................. 26
Bảng 3.2: Cấu trúc thư mục Source Code ............................... 27
Bảng 3.3: Danh sách Services trong BLL ................................ 30

Bảng 4.1: Kết quả kiểm thử chức năng .................................. 57
Bảng 4.2: Kết quả performance testing .................................. 58
Bảng 4.3: Kết quả security testing ....................................... 59

---

## TÓM TẮT
Đồ án "MilkTeaWebsite" hướng tới xây dựng một hệ thống web hỗ trợ quản lý và bán hàng trực tuyến cho cửa hàng trà sữa quy mô vừa và nhỏ, nhằm thay thế quy trình ghi chép thủ công dễ sai sót (size, topping, giá) bằng nền tảng số hóa đồng bộ. Bối cảnh thị trường F&B hậu COVID-19 cho thấy nhu cầu đặt hàng online và tối ưu vận hành tăng mạnh; nhiều cửa hàng nhỏ chưa có công cụ thống kê hoặc quản lý đơn hàng chuẩn hóa.

Hệ thống được hiện thực trên nền tảng ASP.NET Core (Razor Pages) kết hợp Entity Framework Core và PostgreSQL, tổ chức theo kiến trúc phân lớp (Presentation – BLL – DAL – Entity). Các pattern chính áp dụng gồm Repository, Unit of Work (implicit qua DbContext) và Dependency Injection giúp giảm độ kết dính, dễ mở rộng và kiểm thử. Kiến trúc được lựa chọn nhằm cân bằng giữa tính đơn giản triển khai và khả năng mở rộng dài hạn.

Mục tiêu chức năng bao gồm: quản lý sản phẩm đa biến thể (size, topping), giỏ hàng động và quy trình đặt hàng khép kín; phân quyền ba vai trò (Customer/Staff/Admin); cơ chế tính giá tự động và xác thực phía server; seed dữ liệu demo phục vụ kiểm thử. Đóng góp nổi bật là mô hình dữ liệu phản ánh đúng đặc thù trà sữa đa tùy chọn, cùng luồng trạng thái đơn hàng rõ ràng hỗ trợ vận hành.

Phương pháp thực hiện chia thành các sprint ngắn: thiết kế kiến trúc và cơ sở dữ liệu, triển khai chức năng khách hàng và quản trị, kiểm thử chức năng – hiệu năng – bảo mật cơ bản. Kết quả sơ bộ cho thấy hệ thống chạy ổn định, các chức năng cốt lõi đạt tỷ lệ hoàn thiện cao; các chỉ số hiệu năng và bảo mật chi tiết sẽ được đo và cập nhật ở phần kết quả.

Kết luận: Tài liệu này chứng minh tính khả thi và tính nhất quán học thuật của việc áp dụng kiến trúc phân lớp Razor Pages kết hợp Repository/Unit of Work, EF Core và mô hình định giá động hai tầng (client + server) vào một domain F&B có sản phẩm đa biến thể. Nó cung cấp case study cụ thể để đối chiếu với tiếp cận MVC hoặc SPA về độ đơn giản triển khai, khả năng bảo trì và mở rộng; đồng thời hệ thống hóa quy trình triển khai theo sprint làm khung tham chiếu cho các nghiên cứu hoặc dự án sinh viên khác. Các số liệu kiểm thử (sẽ bổ sung) đóng vai trò bằng chứng thực nghiệm củng cố luận điểm lựa chọn công nghệ trong bối cảnh nguồn lực hạn chế.

Từ khóa: thương mại điện tử, trà sữa, ASP.NET Core, Razor Pages, Entity Framework Core, Repository Pattern, Unit of Work, phân quyền, định giá động.

---

# MỞ ĐẦU

## 1. Lý do chọn đề tài
Phần mở đầu trình bày bối cảnh số hóa F&B sau COVID-19 và thực trạng nhiều cửa hàng trà sữa quy mô nhỏ còn quản lý thủ công, dẫn tới sai lệch đơn hàng, thiếu dữ liệu thống kê và khó mở rộng; từ đó hình thành nhu cầu về một hệ thống bán hàng trực tuyến độc lập, chi phí hợp lý. Đề tài vì vậy chọn nền tảng .NET với Razor Pages và EF Core để cân bằng giữa đơn giản triển khai – khả năng bảo trì – mở rộng, đồng thời tạo một case study phục vụ đào tạo và đối chiếu với tiếp cận MVC/SPA; giá trị kỳ vọng là chuẩn hóa quy trình và góp phần thúc đẩy chuyển đổi số cho nhóm SME đồ uống.

Trong bối cảnh tốc độ tăng trưởng thương mại điện tử Việt Nam đạt mức hai chữ số hằng năm [2], phân khúc F&B (Food & Beverage) chứng kiến xu hướng dịch chuyển mạnh sang mô hình đặt hàng trực tuyến và giao nhận nhanh. Ngành đồ uống – đặc biệt là trà sữa – duy trì mức độ phổ biến cao trong nhóm khách hàng trẻ (18–30 tuổi), với tần suất tiêu dùng lặp lại và nhu cầu cá nhân hóa (chọn topping, mức đường, đá) [3]. Tuy nhiên, ở nhóm cửa hàng vừa và nhỏ, mức độ đầu tư vào hệ thống phần mềm quản trị còn hạn chế, dẫn đến hiệu quả vận hành thấp và khó mở rộng.

> (Cây thư mục nguồn đã được chuyển xuống Phụ lục để tránh ngắt mạch nội dung phần mở đầu.)

## 2. Mục tiêu nghiên cứu
Mục tiêu của đề tài là xây dựng một nền tảng web thương mại điện tử cho cửa hàng trà sữa với kiến trúc phân lớp rõ ràng, đáp ứng quy trình mua hàng khép kín (duyệt sản phẩm → cấu hình size/topping → giỏ hàng → thanh toán → quản lý đơn), cơ chế định giá động nhất quán giữa client và server, phân quyền theo vai trò (Customer/Staff/Admin), đồng thời đảm bảo khả năng bảo trì, mở rộng và kiểm thử với các chỉ số hiệu năng – bảo mật – chất lượng mã đạt mức chấp nhận được trong điều kiện nguồn lực hạn chế.

 

## 3. Đối tượng và phạm vi nghiên cứu
Đối tượng nghiên cứu là hệ thống phần mềm quản lý và bán hàng trực tuyến cho cửa hàng trà sữa, bao gồm frontoffice (khách hàng thao tác mua hàng, giỏ, thanh toán) và backoffice (nhân viên/quản trị quản lý sản phẩm, đơn, thống kê). Phạm vi tập trung vào sản phẩm đa biến thể, giỏ và đơn hàng, phân quyền và báo cáo cơ bản; chưa bao gồm cổng thanh toán thực tế, ứng dụng di động, chat realtime, API công khai hay quản lý tồn kho nâng cao để phù hợp nguồn lực và thời gian.

 

## 4. Phương pháp nghiên cứu
Phương pháp nghiên cứu áp dụng quy trình phát triển lặp ngắn hạn (Agile) theo các sprint. Trước hết, nhóm tiến hành phân tích yêu cầu để xác định phạm vi chức năng cốt lõi và các ràng buộc chính. Tiếp theo, dữ liệu và kiến trúc được thiết kế nhằm đảm bảo tính nhất quán và khả năng mở rộng. Sau giai đoạn thiết kế, các lớp DAL, BLL và Presentation được hiện thực tuần tự, bảo đảm phân tách rõ trách nhiệm. Kế đến, hệ thống được kiểm thử ở mức chức năng, hiệu năng và các khía cạnh bảo mật cơ bản nhằm xác nhận mức độ đáp ứng mục tiêu đề ra. Cuối cùng, toàn bộ kết quả được tài liệu hóa để phục vụ đánh giá và tái sử dụng. Dữ liệu đánh giá được thu thập thông qua cơ chế ghi log và bộ trường hợp kiểm thử, từ đó cung cấp bằng chứng cho tính đúng đắn nghiệp vụ, thời gian đáp ứng và sự phù hợp của kiến trúc trong điều kiện nguồn lực hạn chế.

## 5. Ý nghĩa đề tài
Đề tài có ý nghĩa ở cả phương diện học thuật và thực tiễn. Về học thuật, tài liệu cung cấp một trường hợp điển hình minh họa việc áp dụng kiến trúc phân lớp trên nền tảng Razor Pages, kết hợp Repository/Unit of Work và EF Core trong một domain F&B với sản phẩm đa biến thể, qua đó làm rõ ưu và nhược điểm khi so sánh với các tiếp cận MVC hoặc SPA. Về thực tiễn, đề tài góp phần chuẩn hóa quy trình bán hàng cho cửa hàng trà sữa quy mô nhỏ, giảm sai lệch thao tác, tạo lập dữ liệu nền cho phân tích và ra quyết định, đồng thời hình thành khung kỹ thuật dễ bảo trì và mở rộng khi nhu cầu tăng trưởng.

 

---

# CHƯƠNG 1: NGHIÊN CỨU LÝ THUYẾT

## 1.1 Kiến trúc Ứng dụng Web trên .NET
<!-- TODO: Hình 1.x Kiến trúc tổng quan Razor Pages vs MVC vs SPA -->
Ứng dụng web hiện đại trên nền tảng .NET có nhiều lựa chọn kiến trúc: **MVC**, **Razor Pages**, **Blazor**, hoặc xây dựng API cho SPA (Single Page Application) dùng Angular/React/Vue. Việc lựa chọn phụ thuộc độ phức tạp domain, yêu cầu tương tác phía client, và nguồn lực phát triển. Razor Pages cung cấp tiếp cận page-centric: mỗi trang gắn một PageModel tối ưu cho dự án quy mô vừa, giảm boilerplate controller và routing phức tạp [11].

### 1.1.1 So sánh Razor Pages vs MVC
| Tiêu chí | Razor Pages | MVC |
|---------|-------------|-----|
| Cấu trúc | Page + PageModel | Controller + nhiều View |
| Độ rõ ràng luồng | Mỗi trang tự chứa logic xử lý | Logic phân tán giữa nhiều action |
| Boilerplate | Ít hơn (ít lớp trung gian) | Nhiều action, route mapping |
| Tính phù hợp dự án nhỏ | Cao | Chấp nhận được nhưng dư thừa |
| Mở rộng module lớn | Vẫn hiệu quả đến mức vừa | Dễ tách controller theo module |

Razor Pages giảm độ phức tạp khi yêu cầu không đòi hỏi quá nhiều endpoint API riêng biệt. MVC phù hợp hơn nếu cần tách logic thành nhiều action hoặc xây dựng API song song [12].

### 1.1.2 Razor Pages vs SPA (Angular/React)
SPA đem lại trải nghiệm mượt phía client (routing client-side, state management) nhưng chi phí thiết lập cao (bundler, API layer, state store như Redux). Với miền F&B đơn giản, phần lớn tương tác dạng CRUD + cập nhật giá động nhỏ, Razor Pages đủ đáp ứng với JavaScript nhẹ. SPA có ưu thế nếu cần realtime, offline support, hoặc UI cực kỳ phong phú [13].

## 1.2 Entity Framework Core Nội bộ
<!-- TODO: Hình 1.x Workflow EF Core -->
EF Core là ORM hỗ trợ mapping đối tượng - quan hệ, theo dõi trạng thái entity (Added/Modified/Deleted/Unchanged), tạo migration và tối ưu truy vấn thông qua LINQ. Quá trình triển khai query: (i) Biên dịch biểu thức LINQ → (ii) Tạo tree biểu diễn → (iii) Dịch sang SQL tối ưu. Tính năng **Change Tracking** giúp cập nhật nhóm trường thay đổi tự động khi SaveChanges. **Concurrency tokens** có thể sử dụng (RowVersion) nếu sau mở rộng cần kiểm soát cập nhật đồng thời [14].

### 1.2.1 Lợi ích EF Core đối với dự án nhỏ
- Giảm thời gian viết SQL thủ công.  
- Migrations quản lý phiên bản schema dễ dàng.  
- LINQ giàu biểu đạt, giảm lỗi cú pháp.  

### 1.2.2 Hạn chế và biện pháp
- Overhead so với Dapper trong truy vấn đơn giản.  
- Cần tối ưu Include tránh n+1 queries.  
Biện pháp: chỉ Include quan hệ cần thiết (ví dụ: nạp Customer/Employee khi xác thực), sử dụng AsNoTracking cho truy vấn chỉ đọc.

## 1.3 PostgreSQL Đặc điểm Nổi bật
<!-- TODO: Hình 1.x So sánh PostgreSQL tính năng chính -->
PostgreSQL cung cấp hỗ trợ chuẩn SQL phong phú + tính năng nâng cao (JSONB, GIN/GiST index, extension như pg_trgm) cho phép tối ưu tìm kiếm text và linh hoạt dạng dữ liệu bán cấu trúc. Ưu điểm: ACID nghiêm ngặt, cơ chế MVCC tránh lock đọc ghi toàn cục; mở rộng dần khi quy mô dữ liệu tăng [15]. Với domain trà sữa, JSONB có thể dùng để lưu cấu hình khuyến mãi phức tạp trong tương lai.

### 1.3.1 Lý do chọn PostgreSQL thay vì SQL Server
So sánh nhanh tiêu chí chính giữa PostgreSQL và SQL Server trong bối cảnh dự án nhỏ, chi phí hạn chế:
- Chi phí license: PostgreSQL hoàn toàn open-source, giảm chi phí triển khai; SQL Server bản đầy đủ yêu cầu license (Express có giới hạn).  
- JSON & dữ liệu bán cấu trúc: PostgreSQL có JSONB với indexing GIN tối ưu truy vấn key/value; SQL Server hỗ trợ JSON (text) nhưng thiếu kiểu JSONB gốc và indexing linh hoạt tương đương.  
- Indexing nâng cao: PostgreSQL cung cấp GIN/GiST, partial index, expression index giúp tối ưu các truy vấn phân tích; SQL Server mạnh về columnstore nhưng vượt nhu cầu dự án nhỏ hiện tại.  
- Mở rộng và portability: PostgreSQL dễ triển khai trên nhiều môi trường (Docker, cloud phổ thông) mà không phụ thuộc hệ sinh thái vendor; SQL Server tích hợp tốt với stack Microsoft nhưng tăng độ khóa nền tảng.  
- Cộng đồng & extension: Hệ sinh thái extension phong phú (pg_trgm, citext) hỗ trợ tìm kiếm gần đúng và xử lý text – hữu ích nếu mở rộng gợi ý sản phẩm; SQL Server có tính năng riêng (CLR, Analysis Services) nhưng dư thừa với phạm vi MVP.
Kết luận: PostgreSQL phù hợp hơn về chi phí, tính linh hoạt mở rộng và hỗ trợ JSONB/indexing cho nhu cầu phân tích sau này, trong khi SQL Server mang ưu thế tích hợp doanh nghiệp nhưng vượt mức cần thiết của dự án sinh viên nguồn lực đơn.

## 1.4 Phân tích Pattern Áp dụng
<!-- TODO: Hình 1.x Repository + UnitOfWork sơ đồ -->
### 1.4.1 Repository Pattern
Tách abstraction thao tác dữ liệu khỏi logic nghiệp vụ. Repository cung cấp các phương thức truy vấn mục tiêu (GetProductsAsync, GetUserByEmailAsync). Giảm phụ thuộc vào EF Core trực tiếp ở BLL.

### 1.4.2 Unit of Work
Điều phối nhiều repository trong một phiên giao dịch (transaction) thống nhất. Trong phiên bản hiện tại sử dụng DBContext như một Unit of Work implicit. Mở rộng: có thể tạo lớp UoW chuyên biệt nếu thao tác phức hợp đa aggregate.

### 1.4.3 Dependency Injection
Giảm độ kết dính, hỗ trợ thay thế implementation (ví dụ: IProductService). DI container .NET cung cấp lifetime (Scoped/Transient/Singleton) phục vụ quản lý tài nguyên.

## 1.5 Bảo mật Cơ bản trong Ứng dụng Web
Các lớp bảo vệ chính: phân quyền theo vai trò (Role-based Authorization), xác thực tài khoản và hashing mật khẩu (BCrypt/Argon2 – placeholder), chống tấn công XSS nhờ encoding mặc định Razor, chống CSRF qua antiforgery token. Mở rộng tương lai: rate limiting API, audit log thao tác quản trị.

## 1.6 Mô hình Định giá Động (Pricing Model)
Sản phẩm gồm base price theo size + tổng giá topping. Công thức tổng quát:

TổngGiáĐơnVị(size) = GiáBase(size) + Σ GiáToppingChọn  
TổngGiáDòng = TổngGiáĐơnVị(size) × SốLượng  
TổngGiáGiỏ = Σ TổngGiáDòng + PhíVậnChuyển (nếu áp dụng)

Các điểm kiểm soát:
1. Client-side: JavaScript tính nhanh để phản hồi UI.  
2. Server-side: Recalculate xác thực chống sửa DOM.  
3. Validation: Chặn topping không tồn tại hoặc giá âm.

## 1.7 Tóm tắt Chương 1

---

# CHƯƠNG 2: HIỆN THỰC HÓA NGHIÊN CỨU

## 2.1 Mô tả bài toán
Hệ thống cần giải quyết bài toán quản lý và bán hàng cho cửa hàng trà sữa nhỏ và vừa với đặc thù sản phẩm đa biến thể (kích thước, topping). Quy trình hiện trạng dựa vào ghi chép thủ công gây ra: (i) sai lệch giá khi thêm topping; (ii) thất thoát đơn do thiếu theo dõi trạng thái; (iii) không có dữ liệu tổng hợp để phân tích thói quen mua. Bài toán yêu cầu một nền tảng web hợp nhất luồng: duyệt sản phẩm → cấu hình biến thể → giỏ hàng → đặt hàng → xử lý nội bộ → lưu trữ dữ liệu lịch sử. Thành công được đo bằng giảm sai lệch giá, độ nhanh thao tác, và khả năng sinh báo cáo cơ bản.
Các thách thức chính: quản lý cấu trúc giá linh hoạt (size + nhiều topping), đảm bảo tính nhất quán giá giữa client và server, tối ưu schema để tránh truy vấn dư thừa, và thiết kế phân quyền đơn giản nhưng chặt chẽ.

## 2.2 Yêu cầu chức năng
Các yêu cầu chức năng được phân rã thành các mục sau. Mỗi mục liệt kê ID, mô tả ngắn, tác nhân chính và mức ưu tiên (M=Must, S=Should, C=Could).

| ID | Chức năng | Mô tả | Actor | Ưu tiên |
|----|-----------|-------|-------|--------|
| FR-01 | Duyệt danh sách sản phẩm | Hiển thị sản phẩm với bộ lọc cơ bản (size, topping phổ biến) | Customer | M |
| FR-02 | Xem chi tiết sản phẩm | Cho phép chọn size, topping, cập nhật giá động | Customer | M |
| FR-03 | Tính giá động client | Tính tổng giá ngay khi thay đổi size/topping | Customer | M |
| FR-04 | Giỏ hàng | Thêm, xóa, cập nhật số lượng, hiển thị tổng giá | Customer | M |
| FR-05 | Đặt hàng | Tạo đơn với thông tin giao nhận và xác nhận | Customer | M |
| FR-06 | Xử lý đơn hàng | Thay đổi trạng thái (pending→processing→completed/cancelled) | Staff | M |
| FR-07 | Quản lý sản phẩm | CRUD sản phẩm, cập nhật giá, cấu hình topping | Admin | M |
| FR-08 | Quản lý topping | CRUD topping, gắn vào sản phẩm phù hợp | Admin | S |
| FR-09 | Phân quyền truy cập | Chặn truy cập trang quản trị với vai trò không hợp lệ | System | M |
| FR-10 | Lịch sử đơn hàng | Khách hàng xem lại các đơn và trạng thái | Customer | S |
| FR-11 | Dashboard thống kê cơ bản | Hiển thị số lượng đơn theo trạng thái, topping phổ biến | Staff/Admin | S |
| FR-12 | Seed dữ liệu demo | Khởi tạo dữ liệu mẫu phục vụ kiểm thử và demo | Admin | S |
| FR-13 | Recalculate giá server | Server xác thực lại giá đơn để chống sửa DOM | System | M |
| FR-14 | Logging sự kiện đơn hàng | Ghi log tạo/cập nhật trạng thái phục vụ audit cơ bản | System | S |
| FR-15 | Báo cáo xuất thô | Xuất danh sách đơn (CSV) đơn giản | Admin | C |

Các yêu cầu phi chức năng (hiệu năng, bảo mật, khả năng mở rộng) được mô tả ở phần chiến lược kiểm thử và tiêu chí đánh giá.
<!-- TODO: Hình 2.x Use-case tổng quan các tác nhân -->

## 2.3 Mô hình cơ sở dữ liệu
Thiết kế CSDL phản ánh thực thể và quan hệ:
- User (Customer/Staff/Admin) quản lý danh tính và vai trò.
- Product lưu thông tin chung (tên, mô tả cơ bản, trạng thái kích hoạt).
- ProductSize (hoặc Variant) biểu diễn kích thước với chênh lệch giá base.
- Topping là tùy chọn cộng thêm; bảng trung gian (ProductTopping/AllowedTopping) có thể dùng nếu cần giới hạn topping theo sản phẩm.
- Order chứa thông tin đơn (UserId, thời gian, trạng thái), OrderDetail liên kết biến thể size + topping snapshot (lưu giá tại thời điểm đặt để tránh sai lệch khi giá thay đổi về sau).
Ràng buộc: khóa ngoại bảo đảm toàn vẹn tham chiếu; index trên (Order.Status, CreatedAt) tối ưu thống kê; AsNoTracking cho truy vấn chỉ đọc giảm overhead theo dõi trạng thái.
<!-- TODO: Hình 2.x ER Diagram toàn bộ hệ thống -->

## 2.4 Lược đồ Use case
Các tác nhân: Customer, Staff, Admin. Use case chính:
- Customer: Duyệt sản phẩm, cấu hình & thêm giỏ, đặt hàng, xem lịch sử.
- Staff: Xem danh sách đơn pending/processing, cập nhật trạng thái, xem thống kê cơ bản.
- Admin: Quản lý sản phẩm, topping, xem dashboard tổng hợp, seed dữ liệu.
Luồng điển hình đặt hàng: Customer chọn sản phẩm → chọn size/topping (client tính giá) → thêm giỏ → xem giỏ (server kiểm tra lại hợp lệ topping/size) → đặt hàng (server tính lại tổng) → đơn ở trạng thái pending → Staff xử lý → hoàn tất.
<!-- TODO: Hình 2.x Use case chi tiết -->

## 2.5 Kiến trúc hệ thống
Kiến trúc phân lớp:
1. Presentation (Razor Pages): PageModel xử lý request, binding form, gọi services.
2. BLL Services: ProductService (truy vấn, cấu hình biến thể), CartService (thêm/xóa/cập nhật giỏ, tính giá), OrderService (tạo/ cập nhật trạng thái), CategoryService (phân loại), PaymentService (placeholder mở rộng), AuthService (đăng nhập/đăng ký).
3. DAL: Repository trừu tượng hóa EF Core truy vấn, gom SaveChanges qua DbContext như UnitOfWork implicit.
4. Entity: POCO class biểu diễn bảng, dùng data annotations hoặc Fluent API cấu hình.
Cross-cutting: Validation logic (giá topping không âm, size hợp lệ), Logging sự kiện đơn, Dependency Injection để tiêm các services với lifetime phù hợp (Scoped cho services thao tác DbContext).
Ưu điểm: rõ trách nhiệm, dễ mở rộng PaymentGateway hoặc Recommendation module; hạn chế: overhead abstraction so với truy vấn trực tiếp.
<!-- TODO: Hình 2.x Sơ đồ kiến trúc 3-layer -->

---

# CHƯƠNG 3: KẾT QUẢ NGHIÊN CỨU

## 3.1 Giao diện và chức năng đã triển khai
Mô tả các trang chính: Trang chủ, danh sách sản phẩm, chi tiết sản phẩm với cấu hình size/topping, giỏ hàng, thanh toán, lịch sử đơn hàng, dashboard nhân viên và quản trị.
<!-- TODO: Hình 3.x Screenshots giao diện chính -->

## 3.2 Kiểm thử và đánh giá
Tổng hợp kết quả kiểm thử chức năng (độ chính xác định giá), kiểm thử hiệu năng phản hồi trang sản phẩm, kiểm thử bảo mật phân quyền cơ bản và ghi log.
<!-- TODO: Hình 3.x Bảng kết quả kiểm thử / biểu đồ hiệu năng -->

## 3.3 Kết quả đạt được
Đánh giá mức độ hoàn thiện chức năng cốt lõi, độ ổn định vận hành, và mức sẵn sàng cho mở rộng (payment gateway, caching, khuyến nghị).
<!-- TODO: Hình 3.x Tóm tắt KPI đạt được -->

---

# CHƯƠNG 4: KẾT LUẬN VÀ HƯỚNG PHÁT TRIỂN
```


---

<!-- Duplicate summary block removed to avoid redundancy. -->
**Sinh viên thực hiện:** Phạm Minh Thư Trang  
**Ngày cập nhật:** 23/11/2025

_(Các CREATE TABLE statements sẽ được bổ sung ở Phụ lục A)_

## Phụ lục C: Screenshots Đầy Đủ

_(Tất cả screenshots sẽ được chèn vào)_

## Phụ lục D: Test Cases

_(Bảng test cases chi tiết)_

---

**Ghi chú:** Đây là template báo cáo, các phần sẽ được bổ sung chi tiết trong quá trình viết theo kế hoạch Week 04.

**Người thực hiện:** Phạm Minh Thư Trang  
**Ngày tạo:** 23/11/2025

---

## DANH MỤC TÀI LIỆU THAM KHẢO (PLACEHOLDER)

[1] Báo cáo xu hướng số hóa F&B sau COVID-19 (placeholder).  
[2] Tài liệu kiến trúc .NET hiện đại microservices vs monolith (placeholder).  
[3] Nghiên cứu hành vi tiêu dùng đồ uống trực tuyến Việt Nam 2024 (placeholder).  
[4] Phân tích mô hình chi phí nền tảng giao hàng bên thứ ba (placeholder).  
[5] Khảo sát nội bộ 15 cửa hàng trà sữa (dữ liệu thu thập tuần 01) (placeholder).  
[6] So sánh kiến trúc MVC với SPA frameworks trong .NET ecosystem (placeholder).  
[7] Bài viết kỹ thuật về cơ chế định giá động sản phẩm biến thể (placeholder).  
[8] Tài liệu chính thức ASP.NET Core Razor Pages (Microsoft Docs) (placeholder).  
[9] Tài liệu PostgreSQL về JSONB và indexing (placeholder).  
[10] Báo cáo hiệu quả chuyển đổi số SMEs Việt Nam (placeholder).

_(Sẽ thay thế bằng trích dẫn chuẩn APA/IEEE khi thu thập đầy đủ nguồn)_
